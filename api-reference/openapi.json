{"openapi":"3.0.3","info":{"title":"indexify","description":"","contact":{"name":"Diptanu Gon Choudhury","email":"diptanu@tensorlake.ai"},"license":{"name":"Apache-2.0"},"version":"0.1.19"},"paths":{"/executors":{"get":{"tags":["operations"],"summary":"List all executors running extractors in the cluster","operationId":"list_executors","responses":{"200":{"description":"List of currently running executors","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListExecutorsResponse"}}}},"500":{"description":"Unable to load executors"}}}},"/extractors":{"get":{"tags":["operations"],"summary":"List all extractors available in the cluster","operationId":"list_extractors","responses":{"200":{"description":"List of extractors available","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListExtractorsResponse"}}}},"500":{"description":"Unable to search index"}}}},"/namespace/{namespace}/extraction_graphs":{"post":{"tags":["ingestion"],"summary":"Create a new extraction graph in the namespace","operationId":"create_extraction_graph","parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Definition of extraction graph to create","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExtractionGraphRequest"}}},"required":true},"responses":{"200":{"description":"Extraction graph added successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExtractionGraphResponse"}}}},"500":{"description":"Unable to add extraction graph to namespace"}}}},"/namespace/{namespace}/extraction_graphs/{graph}/links":{"get":{"tags":["operations"],"summary":"Get all the extraction graph links for a given extraction graph","operationId":"extraction_graph_links","parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string"}},{"name":"graph","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of extraction graph links","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ExtractionGraphLink"}}}}},"500":{"description":"Unable to list links"}}},"post":{"tags":["operations"],"summary":"Create a link with a given extraction graph","operationId":"link_extraction_graphs","parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string"}},{"name":"graph","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExtractionGraphLink"}}},"required":true},"responses":{"200":{"description":"Extraction graphs linked successfully"},"500":{"description":"Unable to link extraction graphs"}}}},"/namespaces":{"get":{"tags":["operations"],"summary":"List all namespaces registered on the server","operationId":"list_namespaces","responses":{"200":{"description":"List of Data Namespaces registered on the server","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListNamespacesResponse"}}}},"500":{"description":"Unable to sync namespace"}}},"post":{"tags":["operations"],"summary":"Create a new namespace","operationId":"create_namespace","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DataNamespace"}}},"required":true},"responses":{"200":{"description":"Namespace created successfully"},"500":{"description":"Unable to create namespace"}}}},"/namespaces/:namespace/extraction_graphs/{extraction_graph}/content/{content_id}/extraction_policies/{extraction_policy}":{"get":{"tags":["retrieval"],"summary":"Get extracted content metadata for a specific content id and extraction","description":"graph","operationId":"get_content_tree_metadata","parameters":[{"name":"extraction_graph","in":"path","required":true,"schema":{"type":"string"}},{"name":"content_id","in":"path","required":true,"schema":{"type":"string"}},{"name":"extraction_policy","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Gets a content tree rooted at a specific content id in the namespace"},"400":{"description":"Unable to read content tree"}}}},"/namespaces/{namespace}/content/{content_id}":{"put":{"tags":["ingestion"],"summary":"Update a content. All the extraction graphs associated with the content will","description":"be run if the content has changed.","operationId":"update_content","parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string"}},{"name":"content_id","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"string","format":"binary"}}},"required":true},"responses":{"200":{"description":"Updates a specified piece of content","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateContentResponse"}}}},"400":{"description":"Unable to find a piece of content to update"}}},"delete":{"tags":["ingestion"],"summary":"Deletes the content with a given id and also all the extracted content by","description":"extraction graphs.","operationId":"delete_content","parameters":[{"name":"namespace","in":"path","description":"Namespace of the content","required":true,"schema":{"type":"string"}},{"name":"content_id","in":"path","description":"ID of the content to delete","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Deletes specified pieces of content","content":{"application/json":{"schema":{"default":null,"nullable":true}}}},"400":{"description":"Unable to find a piece of content to delete"}}}},"/namespaces/{namespace}/content/{content_id}/download":{"get":{"tags":["retrieval"],"summary":"Download content with a given id","operationId":"download_content","parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string"}},{"name":"content_id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Downloads the bytes of the content","content":{"application/octet-stream":{"schema":{"type":"string","format":"binary"}}}},"400":{"description":"Unable to read content tree"}}}},"/namespaces/{namespace}/content/{content_id}/metadata":{"get":{"tags":["retrieval"],"summary":"Get content metadata for a specific content id","operationId":"get_content_metadata","parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string"}},{"name":"content_id","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Reads a specific content in the namespace","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetContentMetadataResponse"}}}},"400":{"description":"Unable to read content"}}}},"/namespaces/{namespace}/extraction_graphs":{"get":{"tags":["ingestion"],"summary":"List all extraction graphs in a namespace","operationId":"list_extraction_graphs","parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of Extraction Graphs registered on the server","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListExtractionGraphResponse"}}}},"400":{"description":"Unable to list extraction graphs"}}}},"/namespaces/{namespace}/extraction_graphs/{extraction_graph}/content":{"get":{"tags":["retrieval"],"summary":"List all the content ingested into an extraction graph","operationId":"list_content","parameters":[{"name":"namespace","in":"path","description":"Namespace of the content","required":true,"schema":{"type":"string"}},{"name":"extraction_graph","in":"path","description":"Extraction graph name","required":true,"schema":{"type":"string"}},{"name":"source","in":"query","description":"Filter by source, either extraction policy name or 'ingestion' for top level content","required":false,"schema":{"type":"string","nullable":true}},{"name":"parent_id","in":"query","description":"Filter by parent ID","required":false,"schema":{"type":"string","nullable":true}},{"name":"labels_filter","in":"query","description":"Filter by labels. \n        Filter expression is the name of the label, comparison operator, and desired value, e.g. &labels_filter=key>=value. \n        Multiple expressions can be specified as separate query parameters.","required":false,"schema":{"type":"array","items":{"type":"string"},"nullable":true}},{"name":"start_id","in":"query","description":"Pagination start ID. \n        Omit to start from beginning. To continue iteration, \n        specify id of the last content in the previous response","required":false,"schema":{"type":"string","nullable":true}},{"name":"limit","in":"query","description":"Maximum number of items to return","required":false,"schema":{"type":"integer","format":"int32","nullable":true,"minimum":0}},{"name":"return_total","in":"query","description":"Whether to return total count","required":false,"schema":{"type":"boolean","nullable":true}}],"responses":{"200":{"description":"Lists the contents in the namespace","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListContentResponse"}}}},"400":{"description":"Unable to list contents"}}}},"/namespaces/{namespace}/extraction_graphs/{extraction_graph}/extract":{"post":{"tags":["ingestion"],"summary":"Upload a file to an extraction graph in a namespace","operationId":"upload_file","parameters":[{"name":"namespace","in":"path","description":"Namespace of the content","required":true,"schema":{"type":"string"}},{"name":"extraction_graph","in":"path","description":"Extraction graph name","required":true,"schema":{"type":"string"}},{"name":"id","in":"query","description":"id of content to create, if not provided a random id will be generated","required":false,"schema":{"type":"string","nullable":true}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","required":["file"],"properties":{"file":{"type":"string","format":"binary"},"labels":{"type":"object","additionalProperties":{},"nullable":true}}}}},"required":true},"responses":{"200":{"description":"Uploads a file to the namespace"},"400":{"description":"Unable to upload file"}}}},"/namespaces/{namespace}/extraction_graphs/{extraction_graph}/extraction_policies/{extraction_policy}/tasks":{"get":{"tags":["operations"],"summary":"List Tasks generated for a given content and a given extraction policy","operationId":"list_tasks","parameters":[{"name":"namespace","in":"path","description":"Namespace of the content","required":true,"schema":{"type":"string"}},{"name":"extraction_graph","in":"path","description":"Extraction graph name","required":true,"schema":{"type":"string"}},{"name":"extraction_policy","in":"path","description":"Extraction policy name","required":true,"schema":{"type":"string"}},{"name":"content_id","in":"query","description":"Filter by content ID","required":false,"schema":{"type":"string","nullable":true}},{"name":"outcome","in":"query","description":"Filter by task outcome","required":false,"schema":{"type":"string","nullable":true}},{"name":"start_id","in":"query","description":"Pagination start ID. \n        Omit to start from beginning. To continue iteration, \n        specify id of the last task in the previous response","required":false,"schema":{"type":"string","nullable":true}},{"name":"limit","in":"query","description":"Maximum number of items to return","required":false,"schema":{"type":"integer","format":"int32","nullable":true,"minimum":0}},{"name":"return_total","in":"query","description":"Whether to return total count","required":false,"schema":{"type":"boolean","nullable":true}}],"responses":{"200":{"description":"Lists tasks","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListTasksResponse"}}}},"500":{"description":"Unable to list tasks"}}}},"/namespaces/{namespace}/indexes":{"get":{"tags":["retrieval"],"summary":"List all the indexes in a given namespace","operationId":"list_indexes","parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of indexes in a namespace","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ListIndexesResponse"}}}},"500":{"description":"Unable to list indexes in namespace"}}}},"/namespaces/{namespace}/indexes/{index}/search":{"post":{"tags":["retrieval"],"summary":"Search a vector index in a namespace","operationId":"index_search","parameters":[{"name":"namespace","in":"path","required":true,"schema":{"type":"string"}},{"name":"index","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchRequest"}}},"required":true},"responses":{"200":{"description":"Index search results","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IndexSearchResponse"}}}},"500":{"description":"Unable to search index"}}}},"/state_changes":{"get":{"tags":["operations"],"summary":"List the state changes in the system","operationId":"list_state_changes","responses":{"200":{"description":"Extract content from an extractor","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExtractResponse"}}}},"500":{"description":"Unable to search index"}}}}},"components":{"schemas":{"Content":{"type":"object","required":["content_type","bytes","features","labels"],"properties":{"bytes":{"type":"string","format":"binary"},"content_type":{"type":"string"},"features":{"type":"array","items":{"$ref":"#/components/schemas/Feature"}},"labels":{"type":"object","additionalProperties":{}}}},"ContentMetadata":{"type":"object","required":["id","parent_id","root_content_id","namespace","name","mime_type","labels","extraction_graph_names","storage_url","created_at","source","size","hash"],"properties":{"created_at":{"type":"integer","format":"int64"},"extraction_graph_names":{"type":"array","items":{"type":"string"}},"hash":{"type":"string"},"id":{"type":"string"},"labels":{"type":"object","additionalProperties":{}},"mime_type":{"type":"string"},"name":{"type":"string"},"namespace":{"type":"string"},"parent_id":{"type":"string"},"root_content_id":{"type":"string"},"size":{"type":"integer","format":"int64","minimum":0},"source":{"type":"string"},"storage_url":{"type":"string"}}},"DataNamespace":{"type":"object","required":["name"],"properties":{"name":{"type":"string"}}},"DocumentFragment":{"type":"object","required":["content_id","text","mime_type","confidence_score","labels","content_metadata"],"properties":{"confidence_score":{"type":"number","format":"float"},"content_id":{"type":"string"},"content_metadata":{"$ref":"#/components/schemas/ContentMetadata"},"labels":{"type":"object","additionalProperties":{}},"mime_type":{"type":"string"},"root_content_metadata":{"allOf":[{"$ref":"#/components/schemas/ContentMetadata"}],"nullable":true},"text":{"type":"string"}}},"EmbeddingSchema":{"type":"object","required":["dim","distance"],"properties":{"dim":{"type":"integer","minimum":0},"distance":{"$ref":"#/components/schemas/IndexDistance"}}},"Executor":{"type":"object","required":["id","extractors"],"properties":{"extractors":{"type":"array","items":{"$ref":"#/components/schemas/ExtractorDescription"}},"id":{"type":"string"}}},"ExtractRequest":{"type":"object","required":["name","content"],"properties":{"content":{"$ref":"#/components/schemas/Content"},"input_params":{"nullable":true},"name":{"type":"string"}}},"ExtractResponse":{"type":"object","required":["content","features"],"properties":{"content":{"type":"array","items":{"$ref":"#/components/schemas/Content"}},"features":{"type":"array","items":{"$ref":"#/components/schemas/Feature"}}}},"ExtractedMetadata":{"type":"object","required":["id","content_id","metadata","extractor_name"],"properties":{"content_id":{"type":"string"},"extractor_name":{"type":"string"},"id":{"type":"string"},"metadata":{}}},"ExtractionGraph":{"type":"object","required":["id","name","extraction_policies"],"properties":{"description":{"type":"string","nullable":true},"extraction_policies":{"type":"array","items":{"$ref":"#/components/schemas/ExtractionPolicy"}},"id":{"type":"string"},"name":{"type":"string"},"namespace":{"type":"string"}}},"ExtractionGraphLink":{"type":"object","required":["content_source","linked_graph_name"],"properties":{"content_source":{"type":"string"},"linked_graph_name":{"type":"string"}}},"ExtractionGraphRequest":{"type":"object","required":["name","extraction_policies"],"properties":{"description":{"type":"string","nullable":true},"extraction_policies":{"type":"array","items":{"$ref":"#/components/schemas/ExtractionPolicyRequest"}},"name":{"type":"string"}}},"ExtractionGraphResponse":{"type":"object","required":["indexes"],"properties":{"indexes":{"type":"array","items":{"type":"string"}}}},"ExtractionPolicy":{"type":"object","required":["id","extractor","name","graph_name"],"properties":{"content_source":{"type":"string","nullable":true},"extractor":{"type":"string"},"filter":{"type":"array","items":{"type":"string","description":"filter expression in format key/operator/value, e.g. key>=value"},"description":"Filter for content labels, list of expressions.","example":["key1=value1","key2>=value2"]},"graph_name":{"type":"string"},"id":{"type":"string"},"input_params":{"nullable":true},"name":{"type":"string"}}},"ExtractionPolicyRequest":{"type":"object","description":"Request payload for creating a new vector index.","required":["extractor","name"],"properties":{"content_source":{"type":"string","nullable":true},"extractor":{"type":"string"},"filter":{"type":"array","items":{"type":"string","description":"filter expression in format key/operator/value, e.g. key>=value"},"description":"Filter for content labels, list of expressions.","example":["key1=value1","key2>=value2"]},"input_params":{"nullable":true},"name":{"type":"string"}}},"ExtractionPolicyResponse":{"type":"object","properties":{"index_names":{"type":"array","items":{"type":"string"}}}},"ExtractorDescription":{"type":"object","required":["name","input_mime_types","description","input_params","outputs"],"properties":{"description":{"type":"string"},"input_mime_types":{"type":"array","items":{"type":"string"}},"input_params":{},"name":{"type":"string"},"outputs":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/ExtractorOutputSchema"}}}},"ExtractorOutputSchema":{"oneOf":[{"type":"object","required":["embedding"],"properties":{"embedding":{"$ref":"#/components/schemas/EmbeddingSchema"}}},{"type":"object","required":["metadata"],"properties":{"metadata":{}}}]},"Feature":{"type":"object","required":["feature_type","name","data"],"properties":{"data":{},"feature_type":{"$ref":"#/components/schemas/FeatureType"},"name":{"type":"string"}}},"FeatureType":{"type":"string","enum":["embedding","metadata","unknown"]},"GetContentMetadataResponse":{"type":"object","required":["content_metadata"],"properties":{"content_metadata":{"$ref":"#/components/schemas/ContentMetadata"}}},"GetNamespaceResponse":{"type":"object","required":["namespace"],"properties":{"namespace":{"$ref":"#/components/schemas/DataNamespace"}}},"Index":{"type":"object","required":["name","embedding_schema"],"properties":{"embedding_schema":{"$ref":"#/components/schemas/EmbeddingSchema"},"name":{"type":"string"}}},"IndexDistance":{"type":"string","enum":["dot","cosine","euclidean"]},"IndexSearchResponse":{"type":"object","required":["results"],"properties":{"results":{"type":"array","items":{"$ref":"#/components/schemas/DocumentFragment"}}}},"ListContentResponse":{"type":"object","required":["content_list","total"],"properties":{"content_list":{"type":"array","items":{"$ref":"#/components/schemas/ContentMetadata"}},"total":{"type":"integer","format":"int64","minimum":0}}},"ListExecutorsResponse":{"type":"object","required":["executors"],"properties":{"executors":{"type":"array","items":{"$ref":"#/components/schemas/Executor"}}}},"ListExtractionGraphResponse":{"type":"object","required":["extraction_graphs"],"properties":{"extraction_graphs":{"type":"array","items":{"$ref":"#/components/schemas/ExtractionGraph"}}}},"ListExtractorsResponse":{"type":"object","required":["extractors"],"properties":{"extractors":{"type":"array","items":{"$ref":"#/components/schemas/ExtractorDescription"}}}},"ListIndexesResponse":{"type":"object","required":["indexes"],"properties":{"indexes":{"type":"array","items":{"$ref":"#/components/schemas/Index"}}}},"ListNamespacesResponse":{"type":"object","required":["namespaces"],"properties":{"namespaces":{"type":"array","items":{"$ref":"#/components/schemas/DataNamespace"}}}},"ListTasks":{"type":"object","properties":{"content_id":{"type":"string","nullable":true},"limit":{"type":"integer","format":"int64","nullable":true,"minimum":0},"outcome":{"$ref":"#/components/schemas/internal_api.TaskOutcomeFilter"},"return_total":{"type":"boolean"},"start_id":{"type":"string","nullable":true}}},"ListTasksResponse":{"type":"object","required":["tasks","total"],"properties":{"tasks":{"type":"array","items":{"$ref":"#/components/schemas/Task"}},"total":{"type":"integer","format":"int64","minimum":0}}},"MetadataResponse":{"type":"object","required":["metadata"],"properties":{"metadata":{"type":"array","items":{"$ref":"#/components/schemas/ExtractedMetadata"}}}},"SearchRequest":{"type":"object","required":["query"],"properties":{"filters":{"type":"array","items":{"type":"string","description":"filter expression in format key/operator/value, e.g. key>=value"},"description":"Filter for content labels, list of expressions.","example":["key1=value1","key2>=value2"]},"include_content":{"type":"boolean","nullable":true},"k":{"type":"integer","format":"int64","nullable":true,"minimum":0},"query":{"type":"string"}}},"Task":{"type":"object","required":["id","extractor","extraction_policy_id","output_index_table_mapping","namespace","content_metadata","input_params","outcome","index_tables"],"properties":{"content_metadata":{"$ref":"#/components/schemas/ContentMetadata"},"extraction_policy_id":{"type":"string"},"extractor":{"type":"string"},"id":{"type":"string"},"index_tables":{"type":"array","items":{"type":"string"}},"input_params":{},"namespace":{"type":"string"},"outcome":{"type":"integer","format":"int32"},"output_index_table_mapping":{"type":"object","additionalProperties":{"type":"string"}}}},"Text":{"type":"object","required":["text"],"properties":{"id":{"type":"string","nullable":true},"labels":{"type":"object","additionalProperties":{}},"text":{"type":"string"}}},"TextAddRequest":{"type":"object","required":["documents","extraction_graph_names"],"properties":{"documents":{"type":"array","items":{"$ref":"#/components/schemas/Text"}},"extraction_graph_names":{"type":"array","items":{"type":"string"}},"sync":{"type":"boolean","nullable":true}}},"TextAdditionResponse":{"type":"object","required":["content_ids"],"properties":{"content_ids":{"type":"array","items":{"type":"string"}}}}}},"tags":[{"name":"indexify","description":"Indexify API"}]}